// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource sqlite {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "sqlite"
}

generator client {
  provider = "prisma-client-js"
  output   = "node_modules/.prisma/client"
}

model User {
  id        String          @id @default(cuid())
  username  String          @unique @default("")
  password  String
  email     String          @default("")
  links     ShortenedLink[] @relation("ShortenedLink_owner")
  createdAt DateTime?       @default(now())
  role      Role?           @relation("User_role", fields: [roleId], references: [id])
  roleId    String?         @map("role")

  @@index([roleId])
}

model ShortenedLink {
  id           String    @id @default(cuid())
  originalURL  String    @default("")
  shortenedURL String    @unique @default("")
  isPrivate    Boolean   @default(false)
  privatePass  String    @default("")
  owner        User?     @relation("ShortenedLink_owner", fields: [ownerId], references: [id])
  ownerId      String?   @map("owner")
  clicks       Int?      @default(0)
  createdAt    DateTime? @default(now())

  @@index([ownerId])
}

model Role {
  id                 String  @id @default(cuid())
  name               String  @default("")
  canDeleteLink      Boolean @default(false)
  canManageAllLinks  Boolean @default(false)
  canSeeOtherPeople  Boolean @default(false)
  canEditOtherPeople Boolean @default(false)
  canManagePeople    Boolean @default(false)
  canManageRoles     Boolean @default(false)
  canUseAdminUI      Boolean @default(false)
  assignedTo         User[]  @relation("User_role")
}
